/**
 * 1. drops users collection
 * 2. fills database with users.json data
 */
function seed () {
  const Promise = require('bluebird')
  const fs = require('fs')
  const mongoose = require('mongoose')
  const User = require('../lib/models/User')
  const config = require('../lib/config')
  const users = require('./users.json')

  mongoose.Promise = Promise
  mongoose
    .connect(config.mongoURI)
    .then(_ => User.collection.drop())
    .catch(err => {
      console.log('it seems users collection is already empty..')
    })
    .then(_ => 
      Promise.all(
        users.map(user => new User(user).save())
      )
    )
    .then(_ => {
      mongoose.connection.close()
      console.log('database was successfully cleaned and filled with new data')
    })
}

process.env.NODE_ENV !== 'production'
  ? seed()
  : console.log('seed in production mode is forbidden')


/** remove it later */
// const base64 = 'data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QNtaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MjIwNkFFMTk3QTM0RTAxMUIwMDhBNDkwNzhGQjdBOTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjZDOUJFMTI1NTE1MTFFNUFBMjBGOUVDM0I4OTg0Q0YiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjZDOUJFMTE1NTE1MTFFNUFBMjBGOUVDM0I4OTg0Q0YiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNCBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjMwNkFFMTk3QTM0RTAxMUIwMDhBNDkwNzhGQjdBOTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjIwNkFFMTk3QTM0RTAxMUIwMDhBNDkwNzhGQjdBOTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94Onht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'
/** remove it later */
